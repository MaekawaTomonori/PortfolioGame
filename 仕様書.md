# 見下ろし型シューティングゲーム 総合仕様書

## 1. 概要
プレイヤーはフィールド上を移動しつつ、攻撃は基本自動で行われる見下ろし型のシューティングゲーム。  
カメラ操作により視点をプレイヤーの真上を原点にしてXZ平面上でずらせることができ、操作性と視認性を両立。  
就活作品としてのアピールポイントは以下の通り：
- プレイヤーのスキル／敵の行動パターンを**コンポーネント化**し、**組み替え・差し替え可能な設計**。
- 実装とテストが容易な**データ駆動＋柔軟な依存分離アーキテクチャ**。
- 見た目に訴える**演出（パーティクル、カメラフィードバック、ヒットエフェクトなど）**。
- UIや補助機能などの**細部の磨き込み（手数で差をつける）**。

---

## 2. ゲームプレイ要素

### 2.0 参考ゲーム
- **God of Weapons** : カメラ仕様やゲーム性など操作系はだいぶ近い
- **Waves** : 操作感や演出面を参考にする
- **League of Legends** : カメラ、スキルの発生を参考にしたい

### 2.1 基本操作
- **移動**：WASD / 左スティックで自由移動（2D平面、XZ軸方向）。
- **カメラ操作**：右スティックまたはマウスでXZ方向にオフセット。スティックを離すと滑らかに中央（オフセット0）へ戻る。
- **攻撃**：自動攻撃。範囲内の敵のうち「最も自信に近い（＝距離が近い／優先度の高い）」敵を狙って発射。

### 2.2 拡張操作・スキルシステム
- **スキル発動の方向指定**：LoLのスキルショット風の軌道予測ライン表示
- **複数ターゲット同時攻撃スキル**：チェインライトニングなど範囲攻撃
- **範囲設置型スキル**：LoLのゾーニング用スキル（スローエリア、HP回復エリアなど）
- **スキル連携コンボ**：凍結→爆発で追加ダメージなど
- **スキルキャンセル**：即行動切り替え（LoL風の高速テンポ）
- **スキル射程可変**：押しっぱなしで射程を伸ばす

### 2.3 ターゲティングロジック
- 有効射程内の敵を検出（例：半径R）。
- 各敵に対しスコアを計算（例：距離の逆数＋優先度係数＋状態補正）。
- 最もスコアの高い敵をターゲットとして選択。
- ターゲットロック時間やスイッチのクールダウンを調整可能（例：急激なターゲットチェンジを抑制するスムージング）。

---

## 3. カメラ仕様

- **基準**：プレイヤーの真上を原点とする（ワールド空間）。
- **高さ**：Y軸は固定（例：Y = 10）。地面は Y = 0 の平坦面。
- **オフセット操作**：
  - XZ方向に最大 ±10 の範囲で移動可能。
  - 入力（右スティック）を離すとイージング付きで中央へ戻る（例：線形補間またはイージング関数）。
- **補助演出**：
  - 移動に応じた軽微なカメラシェイク（例：高速移動時、ダメージ時に少し揺れる）。
  - ターゲット取得時のズーム／クロスヘア強調演出。
  - Wave開始時のカメラ演出（Wavesの導入演出参考）。
  - 画面全体エフェクト演出（大技やボススキル時）。

---

## 4. 戦闘・成長システム

### 4.1 武器・装備システム
- **武器進化システム**：God of Weaponsのようにプレイ中アップグレード
- **弾の属性システム**：火・氷・雷で特殊効果
- **弾の貫通・跳弾スキル**：複数敵への効率的攻撃
- **装備セット効果**：同系統武器・防具の組み合わせでボーナス

### 4.2 プレイヤー成長
- **ステータスビルド分岐**：攻撃特化、防御特化、速度特化
- **ランダムアイテム選択イベント**：プレイヤーに3択を提示
- **Wave間の買い物フェーズ**：God of Weapons参考
- **スキルのクールダウン短縮アイテム**
- **攻撃と移動速度が徐々に加速するバフ**
- **コンボ数による攻撃強化**
- **移動中攻撃性能変化**：静止で精密、移動で連射

### 4.3 特殊能力・バフシステム
- **味方AIユニット召喚**：LoLのペットスキル風
- **敵のスキルを盗む能力**
- **敵撃破でクールダウン即リセット**：キルリセット効果
- **敵ドロップアイテムを吸い寄せる磁力スキル**
- **特定条件下で解放される隠しスキル**

---

## 5. 敵システム・Wave設計

### 5.1 敵の基本行動
- **BehaviorComponent**（複数差し替え可能）：
  - 追従／逃走／パターン移動／範囲攻撃／分裂／シールド
- **敵がプレイヤーを引き寄せるスキル**
- **敵のHP割合で行動変化**：瀕死時に逃走や自爆
- **敵同士のバフ共有**：リーダー敵が仲間を強化
- **敵の特殊シールド**：特定属性しか通らない

### 5.2 Wave構成・進行システム
- **Waveごとの敵パターン変化**：Waves参考
- **ミニボスのウェーブ挿入**：通常より強い敵
- **拠点防衛モード**：中央オブジェクトを守る
- **タイムリミット制ミッション**：一定時間で目標達成
- **Waveごとのボーナス目標**：ノーダメージクリアで追加報酬

### 5.3 環境・フィールド効果
- **画面端から迫る危険エリア**：強制移動や戦線縮小
- **視界システム**：霧で敵が見えないが索敵スキルで可視化
- **フィールド全体を覆う天候変化**：視界・移動に影響
- **ゲームスピード加速イベント**：短時間全体スピードアップ
- **弾幕フェーズ**：Waves風に画面全体が弾で埋まる

---

## 6. アーキテクチャ（アピールの核）

### 6.1 Core Principles
- **コンポーネントベース**：プレイヤーのスキル／敵の行動を独立したコンポーネント（Behavior, Skill, Targeting, VisualFeedback など）として実装し、組み替え可能に。
- **データ駆動**：挙動やパラメータは外部設定（JSON/YAML/ScriptableObject等）から供給。コード変更なしでチューニング・A/Bテスト可能。
- **依存の逆転（Dependency Inversion）**：高レベルのロジックは具体実装に依存せずインターフェース経由で疎結合。
- **テスト容易性**：モック／スタブを差し替え可能な設計。ユニットテスト／統合テストの仕組みを想定。

### 6.2 主要コンポーネント（例）
#### プレイヤー側
- `MovementComponent`：移動処理（入力→位置反映、制限、ダッシュ等）。
- `CameraOffsetComponent`：カメラのXZオフセット処理、スムージングリセット。
- `AutoAttackComponent`：ターゲティング＋射出ロジック。
- `SkillComponent`：プレイヤー固有のスキル（例：バースト、バリア、時間巻き戻し等）。合成・チェーン可能。
- `FeedbackComponent`：ヒットフィードバック、サウンド、UI更新。

#### 敵側
- `BehaviorComponent`（複数差し替え可能）：
  - 例：追従／逃走／パターン移動／範囲攻撃／分裂／シールド。
- `TargetPriorityComponent`：プレイヤーに対する優先度や行動中のステートに応じたスコア変化。
- `DamageHandlerComponent`：ダメージ受け、状態異常付与、エフェクトトリガー。
- `SpawnComponent`：出現ロジック（ウェーブ、条件付き、時間経過等）。

#### 共通
- `ConfigLoader`：外部ファイル読み込み（例：敵ごとのBehavior構成、プレイヤースキル定義）。
- `EventBus`： loosely coupled なイベント伝播（例：敵撃破時、ヒット時、スキル発動時）。

---

## 7. ビジュアル／演出

### 7.1 パーティクル・エフェクト
- ヒットエフェクト（敵／プレイヤー）。
- 弾道のトレイル。
- スキル発動時のサークル／エネルギー蓄積演出。
- 敵破壊時の分解エフェクト（断片＋光＋カメラパルス）。
- プレイヤーの残像演出（高速移動やスキル時）。
- 残りHPでエフェクト変化（ピンチ時に炎上や発光）。

### 7.2 カメラフィードバック・画面演出
- ダメージ時の軽いズームアウト＋シェイク。
- クリティカルヒットやコンボの際の一瞬のポストプロセス（例：輝度増加、グロー強調）。
- ターゲットロック成功時のUIと連動したクロスヘアアニメーション。
- ヒットストップ演出（LoLやアクションゲーム風の攻撃手応え）。
- 視点エフェクト（被弾時に画面周囲が赤く染まるなど）。
- 連続キル演出（LoLのキリングスプリー風）。
- 敵とプレイヤーのサイズ変化イベント（巨大化・縮小）。

### 7.3 サウンド連携
- 攻撃／被弾／スキル／敵出現などの音響フィードバック（レイヤー構造でフェードイン・アウト）。
- リズム的な連携（オプション）でプレイヤー行動がBGMと微妙に同期する小さな演出（巧妙な手数としてのアクセント）。

---

## 8. UI・UX 機能（手数で差をつける部分）

### 8.1 インゲームHUD
- ターゲットインジケーター（ロック先の強調表示）。
- スキルクールダウン表示（視覚的に読み取りやすいゲージ＋数値）。
- コンボ / スコアメーター（ビジュアルフィードバック付き）。
- プレイヤーステータス（ヘルス、バフ、デバフ）。
- 敵のスキル詠唱インジケーター（攻撃範囲予告）。
- ミニマップに敵の予測ルート表示。

### 8.2 設定・デバッグ用オーバーレイ
- 実行時に各コンポーネントの状態可視化（ターゲット候補、スコア、Behaviorステートなど）。
- パラメータスライダーによるリアルタイムチューニング（開発／プレゼン用）。
- ログフィルタ（例：最近のダメージイベント、ターゲット変更履歴）。

### 8.3 リプレイ／デモ機能（アピール向け）
- 簡易リプレイ（直近の入力と状態を巻き戻して再生）。
- ハイライト生成（高スコアアクションを自動で切り出して表示）。

### 8.4 チュートリアル／フィードバック
- 操作ガイドの段階表示（プレイヤーの最初の一歩を導く）。
- パフォーマンスフィードバック（例：スコアに対する改善点ヒント、命中率表示）。

---

## 9. 状態異常・デバフシステム

- **敵の行動を一時停止させるデバフ**：スタン、フィアー
- **スローエリア**：足止めフィールド
- **敵が一定条件で分裂**
- **弾の属性による状態異常**：
  - 火：継続ダメージ（燃焼）
  - 氷：移動速度低下（凍結）
  - 雷：スタン効果

---

## 10. 拡張機能（プラスアルファ）

- **モジュラーな難易度調整**：敵の出現密度／行動速度／ターゲット優先度をデータでパラメータ化。
- **リワード＆アンロック**：プレイに応じたスキルのアンロック、見た目変更（エフェクトカスタム）。
- **スコア解析画面**：セッション後に行動ログを元にしたスコアブレークダウン。
- **エフェクトプリセット／カスタム**：ユーザーが演出強度を選べる（高性能PC向け／ライトモード）。

---

## 11. 技術スタック（提案）

- 言語：C++（パフォーマンスと就活向けの本気度表現）、あるいはプロトタイプに限りUnity（C#）/Godot（GDScript）併用可（ただし自作エンジン風に見せる構造）。
- 描画：DirectX 12 / 低レベルグラフィックスAPI（既存の知見をアピール）。
- パーティクル：GPUベースのパーティクルシステム（カスタムシェーダーで制御）。
- UI：データ駆動のインゲームUI（リッチなアニメーション付き）。
- シリアライズ：JSON / カスタムバイナリ / Scriptable-like データロード基盤。
- テスト：抽象化したロジックに対するユニットテストフレームワーク（自前のモックインターフェース）、デバッグオーバーレイ。

---

## 12. 設計・実装上の工夫（就活アピール用ポイントの言語化例）

- **「コンポーネント設計で再利用性と拡張性を両立」**  
  各スキル・行動・ターゲティングは独立した小さなモジュールとして設計し、デザイナー／開発者が組み替えて新規挙動を作れることを実証。

- **「データ駆動設計により、コード変更不要の調整とABテストを可能に」**  
  ゲームバランス調整や敵パターン変更は設定ファイルのみで行い、CIパイプライン上でバージョン比較が容易。

- **「フィードバックループの高速化」**  
  開発時にリアルタイムに調整可能なデバッグオーバーレイとライブチューニングで試行→改善を短縮。

- **「演出をコードから分離したレイヤー構造」**  
  ゲームロジックと見た目の演出（パーティクル/カメラ/サウンド）は独立しつつシグナルで連携、スクリプト的に差し替え可能。

---

## 13. テスト計画

- **ユニットテスト**：
  - ターゲティングロジック（複数条件下のターゲット選定の妥当性）
  - スキル発動／クールダウン管理
  - 敵Behaviorステート遷移
- **インテグレーションテスト**：
  - プレイヤー→敵の攻撃ループ（自動ターゲット＋ヒット判定）
  - UIと状態の同期（スキル表示 vs 実際のクールダウン）
- **ビジュアルリグレッション**：
  - 重要演出（例：クリティカル時のフィードバック）が崩れていないかのチェック。
- **プレイテスト用ログ出力**：
  - 入力履歴／ターゲット変化／スコア要素の記録。

---

## 14. コントロール・入力マッピング（例）

| 操作 | 入力 | 説明 |
|------|------|------|
| 移動 | 左スティック / WASD | XZ平面移動 |
| カメラオフセット | 右スティック / マウスドラッグ | プレイヤー真上のオフセット |
| スキル発動 | ボタン（例：X / E） | アクティブスキル |
| スキル方向指定 | マウス / 右スティック | スキルショット方向指定 |
| UI トグル | Tab / Start | デバッグオーバーレイ表示切替 |

---

## 15. パフォーマンス・最適化方針

- **オブジェクトプーリング**：弾、エフェクト、敵インスタンスの再利用。
- **LOD的簡易化**：画面外または遠距離のエフェクト・敵は低負荷状態に。
- **更新の分離**：重要度に応じて更新頻度を変える（例：ターゲットスキャンはフレームごとではなく間引き可能）。

---

## 16. アクセシビリティ／品質

- 色覚バリアフリー用のUIモード（色だけでなく形でもフィードバック）。
- ゲーム速度スケール（ゆっくり再生／反応が追いつかない人向けの補助）。
- 音量・エフェクト強度の細かいカスタム。

---

## 17. 展示・ポートフォリオ向け演出

- 「設定パネル」から各種挙動を切り替えられるデモモード。
- スキル／敵の組み合わせをプリセット化して見せるギャラリー。
- 実装の設計図（簡易UML／構造図）を画面内で表示できるデバッグビュー。

---

## 18. 今後のロードマップ（マイルストーン例）

1. 基本プレイヤー移動＋カメラオフセット実装  
2. 自動ターゲティング＋攻撃（単体）  
3. 敵Behaviorコンポーネント群実装（複数タイプ）  
4. データ駆動ロード／設定ファイルシステム  
5. パーティクル・フィードバック層追加  
6. UI（HUD＋デバッグオーバーレイ）  
7. プレイテスト用ログとスコア解析画面  
8. 難易度調整／リプレイ／ハイライト生成  
9. ポートフォリオ用のプレゼンシーン構築（自動デモ＋説明付き）

---

## 19. 履歴書／ポートフォリオでの書き方例（箇条書きアピール文）

- 「データ駆動かつコンポーネント化されたゲームシステムを自作し、プレイヤーのスキル・敵の行動を柔軟に組み替え可能なアーキテクチャを設計・実装」  
- 「実装とバランス調整をリアルタイムに可能にするライブチューニングおよびデバッグオーバーレイを開発」  
- 「GPUパーティクル、カメラフィードバック、スコア可視化など豊富な演出によるプレイフィールの向上を実現」  
- 「細部まで作り込んだUIとセッション後スコア解析機能により、ユーザー体験を多層的に分析・改善可能に」  

---